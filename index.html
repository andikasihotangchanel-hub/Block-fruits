<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Block Fruis</title>
<style>
body {
  margin: 0;
  overflow: hidden;
  background: #87ceeb;
  font-family: sans-serif;
}

#ui {
  position: fixed;
  bottom: 10px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  gap: 5px;
}

.btn {
  width: 60px;
  height: 60px;
  background: rgba(0,0,0,0.5);
  color: white;
  font-size: 20px;
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  user-select: none;
}

#inventory {
  position: fixed;
  top: 10px;
  left: 10px;
  display: flex;
  gap: 5px;
}

.slot {
  width: 40px;
  height: 40px;
  background: #555;
  border: 2px solid #222;
}
.active {
  border: 2px solid yellow;
}
</style>
</head>

<body>
<canvas id="game"></canvas>

<div id="inventory">
  <div class="slot active" data-block="grass"></div>
  <div class="slot" data-block="wood"></div>
  <div class="slot" data-block="leaf"></div>
</div>

<div id="ui">
  <div class="btn" id="left">◀</div>
  <div class="btn" id="up">▲</div>
  <div class="btn" id="down">▼</div>
  <div class="btn" id="right">▶</div>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
canvas.width = innerWidth;
canvas.height = innerHeight;

const TILE = 32;
const MAP = 64;

let player = { x: 32, y: 32, speed: 4 };
let camera = { x: 0, y: 0 };
let keys = {};

let selectedBlock = "grass";

const world = [];

// generate world
for (let y = 0; y < MAP; y++) {
  world[y] = [];
  for (let x = 0; x < MAP; x++) {
    world[y][x] = "grass";
  }
}

// trees
for (let i = 0; i < 30; i++) {
  let x = Math.floor(Math.random() * MAP);
  let y = Math.floor(Math.random() * MAP);

  world[y][x] = "wood";
  if (y > 0) world[y - 1][x] = "leaf";
}

function drawBlock(type, x, y) {
  if (type === "grass") ctx.fillStyle = "#3cb371";
  if (type === "wood") ctx.fillStyle = "#8b4513";
  if (type === "leaf") ctx.fillStyle = "#228b22";

  ctx.fillRect(x, y, TILE, TILE);
}

function update() {
  if (keys["w"]) player.y -= player.speed;
  if (keys["s"]) player.y += player.speed;
  if (keys["a"]) player.x -= player.speed;
  if (keys["d"]) player.x += player.speed;

  camera.x = player.x - canvas.width / 2;
  camera.y = player.y - canvas.height / 2;
}

function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  for (let y = 0; y < MAP; y++) {
    for (let x = 0; x < MAP; x++) {
      drawBlock(
        world[y][x],
        x * TILE - camera.x,
        y * TILE - camera.y
      );
    }
  }

  ctx.fillStyle = "red";
  ctx.fillRect(
    player.x - camera.x,
    player.y - camera.y,
    TILE, TILE
  );
}

function loop() {
  update();
  draw();
  requestAnimationFrame(loop);
}
loop();

// keyboard
addEventListener("keydown", e => keys[e.key.toLowerCase()] = true);
addEventListener("keyup", e => keys[e.key.toLowerCase()] = false);

// mobile buttons
function bind(id, key) {
  document.getElementById(id).ontouchstart = () => keys[key] = true;
  document.getElementById(id).ontouchend = () => keys[key] = false;
}
bind("up", "w");
bind("down", "s");
bind("left", "a");
bind("right", "d");

// inventory
document.querySelectorAll(".slot").forEach(slot => {
  slot.onclick = () => {
    document.querySelectorAll(".slot").forEach(s => s.classList.remove("active"));
    slot.classList.add("active");
    selectedBlock = slot.dataset.block;
  };
});
</script>
</body>
</html>
    
