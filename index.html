<!DOCTYPE html>
<html>
<head>
  <title>Block Fruis</title>
  <style>
    body { margin: 0; overflow: hidden; background: #87ceeb; }
    canvas { display: block; }
  </style>
</head>
<body>

<canvas id="game"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

const TILE = 32;
const MAP_SIZE = 64;

// ===== PLAYER (TIDAK DIGAMBAR) =====
const player = { x: MAP_SIZE * TILE / 2, y: MAP_SIZE * TILE / 2, speed: 3 };

// ===== KAMERA =====
const camera = { x: 0, y: 0 };

// ===== INPUT =====
const keys = {};
addEventListener("keydown", e => keys[e.key.toLowerCase()] = true);
addEventListener("keyup", e => keys[e.key.toLowerCase()] = false);

// ===== MAP =====
const map = [];
for (let y = 0; y < MAP_SIZE; y++) {
  map[y] = [];
  for (let x = 0; x < MAP_SIZE; x++) {
    map[y][x] = Math.random() < 0.1 ? "stone" : "grass";
  }
}

// ===== BATU LIAR =====
const rocks = [];
for (let i = 0; i < 150; i++) {
  rocks.push({
    x: Math.floor(Math.random() * MAP_SIZE),
    y: Math.floor(Math.random() * MAP_SIZE)
  });
}

// ===== UPDATE =====
function update() {
  if (keys["w"]) player.y -= player.speed;
  if (keys["s"]) player.y += player.speed;
  if (keys["a"]) player.x -= player.speed;
  if (keys["d"]) player.x += player.speed;

  camera.x = player.x - canvas.width / 2;
  camera.y = player.y - canvas.height / 2;
}

// ===== DRAW =====
function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // MAP
  for (let y = 0; y < MAP_SIZE; y++) {
    for (let x = 0; x < MAP_SIZE; x++) {
      const sx = x * TILE - camera.x;
      const sy = y * TILE - camera.y;

      if (map[y][x] === "grass") ctx.fillStyle = "#3cb043";
      else ctx.fillStyle = "#888";

      ctx.fillRect(sx, sy, TILE, TILE);
    }
  }

  // BATU LIAR
  ctx.fillStyle = "#555";
  for (const r of rocks) {
    ctx.fillRect(
      r.x * TILE - camera.x,
      r.y * TILE - camera.y,
      TILE,
      TILE
    );
  }
}

// ===== LOOP =====
function loop() {
  update();
  draw();
  requestAnimationFrame(loop);
}
loop();
</script>

</body>
</html>
