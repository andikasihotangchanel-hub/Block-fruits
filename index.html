<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Roblox World Simulation</title>
<style>
body { margin: 0; overflow: hidden; }
canvas { display: block; }
</style>
</head>
<body>

<script src="https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.min.js"></script>

<script>

// Scene
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x87CEEB);

// Camera
const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
camera.position.set(0, 5, 10);

// Renderer
const renderer = new THREE.WebGLRenderer();
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

// Light
const light = new THREE.DirectionalLight(0xffffff, 1);
light.position.set(10,20,10);
scene.add(light);

scene.add(new THREE.AmbientLight(0xffffff, 0.5));

// Ground
const groundGeometry = new THREE.PlaneGeometry(200, 200);
const groundMaterial = new THREE.MeshLambertMaterial({ color: 0x228B22 });
const ground = new THREE.Mesh(groundGeometry, groundMaterial);
ground.rotation.x = -Math.PI / 2;
scene.add(ground);

// Kota Roblox (blok-blok)
for(let i=-40;i<40;i+=8){
  for(let j=-40;j<40;j+=8){
    const height = Math.random()*10+5;
    const building = new THREE.Mesh(
      new THREE.BoxGeometry(5, height, 5),
      new THREE.MeshLambertMaterial({color: 0xcccccc})
    );
    building.position.set(i, height/2, j);
    scene.add(building);
  }
}

// Player Roblox
const player = new THREE.Group();

// Body
const body = new THREE.Mesh(
  new THREE.BoxGeometry(2,3,1),
  new THREE.MeshLambertMaterial({color: 0x0000ff})
);
body.position.y = 2;
player.add(body);

// Head
const head = new THREE.Mesh(
  new THREE.BoxGeometry(1.5,1.5,1.5),
  new THREE.MeshLambertMaterial({color: 0xffcc99})
);
head.position.y = 4;
player.add(head);

scene.add(player);

// Controls
let keys = {};
let velocityY = 0;
let isJumping = false;

document.addEventListener("keydown", e => keys[e.key.toLowerCase()] = true);
document.addEventListener("keyup", e => keys[e.key.toLowerCase()] = false);

// Animation
function animate(){
  requestAnimationFrame(animate);

  // Movement
  if(keys["w"]) player.position.z -= 0.5;
  if(keys["s"]) player.position.z += 0.5;
  if(keys["a"]) player.position.x -= 0.5;
  if(keys["d"]) player.position.x += 0.5;

  // Jump
  if(keys[" "] && !isJumping){
    velocityY = 0.3;
    isJumping = true;
  }

  player.position.y += velocityY;
  velocityY -= 0.01;

  if(player.position.y <= 0){
    player.position.y = 0;
    velocityY = 0;
    isJumping = false;
  }

  // Camera follow
  camera.position.x = player.position.x;
  camera.position.z = player.position.z + 10;
  camera.lookAt(player.position);

  renderer.render(scene, camera);
}

animate();

// Resize
window.addEventListener("resize", ()=>{
  camera.aspect = window.innerWidth/window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth, window.innerHeight);
});

</script>

</body>
</html>
